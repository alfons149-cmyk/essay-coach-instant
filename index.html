<!doctype html>
<html lang="en" data-theme="coral">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <title data-i18n="meta.title">EssayCoach ‚Äì Cambridge Toolkit (EN)</title>

  <!-- Developer-only mobile preview: ?mobile=1 adds "force-mobile" class -->
  <script>
    (function () {
      try {
        const qp = new URLSearchParams(window.location.search);
        if (qp.get("mobile") === "1") {
          document.documentElement.classList.add("force-mobile");
          console.log("[DEV] Mobile preview mode ON (force-mobile).");
        }
      } catch (e) {
        console.warn("[DEV] Mobile preview mode init failed:", e);
      }
    })();
  </script>

  <!-- GitHub Pages base (project pages) -->
  <base href="/essay-coach-instant/">

  <!-- Icons -->
  <link rel="icon" type="image/png" sizes="192x192" href="icon-192.png">
  <link rel="apple-touch-icon" href="icon-192.png">
  <meta name="theme-color" content="#111111" />

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=IBM+Plex+Serif:wght@400;600&display=swap" rel="stylesheet">

  <!-- Styles -->
  <link rel="stylesheet" href="css/style.css">

  <!-- App scripts (order matters) -->
  <script defer src="js/i18n.js"></script>
  <script defer src="js/config.js"></script>
  <script defer src="js/cambridge_rubric.js"></script>
  <script defer src="js/scoring.js"></script>
  <script defer src="js/app.js"></script>

  <!-- Tiny debug guard for i18n -->
  <script>
    window.addEventListener('DOMContentLoaded', () => {
      if (typeof window.I18N === 'undefined') {
        console.error('[i18n] window.I18N is missing. Check js/i18n.js path/name.');
      }
    });
  </script>
</head>

<body>

  <!-- üîπ Landing page ‚Äì shown first -->
  <section id="landing-hero" class="landing">
    <!-- Coral wave -->
    <div class="landing-wave">
      <svg viewBox="0 0 1440 320" preserveAspectRatio="none">
        <path
          d="M0,96L60,106.7C120,117,240,139,360,160C480,181,600,203,720,192C840,181,960,139,1080,122.7C1200,107,1320,117,1380,122.7L1440,128L1440,0L1380,0C1320,0,1200,0,1080,0C960,0,840,0,720,0C600,0,480,0,360,0C240,0,120,0,60,0L0,0Z">
        </path>
      </svg>
    </div>

    <div class="landing-inner">
      <header class="landing-header">
        <h1 class="landing-title">EssayCoach ‚Äî Your Personal Cambridge Writing Teacher</h1>
        <p class="landing-subtitle">
          Train for B2, C1, and C2 essays with instant, Cambridge-style feedback ‚Äî any time, as often as you like.
        </p>
      </header>

          <div class="landing-grid">
      <!-- Left: copy -->
      <div class="landing-column landing-copy">
        <h2>Train for the real exam, not just for AI</h2>
        <p>
          These days, many people practise essays with AI. That‚Äôs fine ‚Äì but AI will
          <strong>not</strong> sit next to you in the exam room. When you face the real Cambridge paper,
          <strong>you</strong> have to do everything yourself.
        </p>
        <p>
          EssayCoach works like your personal teacher. It corrects your essays in under a minute,
          using the logic of the Cambridge writing scale, and then shows you exactly which rule
          or unit to study in the Course Book.
        </p>
        <ul class="landing-list">
          <li>Unlimited B2, C1, and C2 essay practice.</li>
          <li>Instant, Cambridge-style feedback ‚Äì 24/7.</li>
          <li>Direct links to clear explanations and examples.</li>
        </ul>
      </div>

      <!-- Right: SVG hero illustration -->
      <div class="landing-column landing-illustration" aria-hidden="true">
        <svg
          class="hero-svg"
          viewBox="0 0 420 320"
          role="img"
        >
          <!-- Background blob -->
          <defs>
            <linearGradient id="heroBlob" x1="0%" y1="0%" x2="100%" y2="100%">
              <stop offset="0%" stop-color="#ff7b6b" stop-opacity="0.75" />
              <stop offset="100%" stop-color="#ff5b4a" stop-opacity="0.9" />
            </linearGradient>
            <linearGradient id="heroScreen" x1="0%" y1="0%" x2="100%" y2="0%">
              <stop offset="0%" stop-color="#ffffff" />
              <stop offset="100%" stop-color="#fff7f4" />
            </linearGradient>
          </defs>

          <ellipse cx="210" cy="150" rx="190" ry="120" fill="url(#heroBlob)" opacity="0.9" />

          <!-- Laptop base -->
          <rect x="90" y="150" width="240" height="120" rx="14" fill="#ffffff" />
          <rect x="100" y="160" width="220" height="90" rx="10" fill="url(#heroScreen)" />
          <rect x="80" y="245" width="260" height="20" rx="10" fill="#f6d4c9" />

          <!-- Screen top bar -->
          <rect x="100" y="160" width="220" height="16" rx="10" fill="#ffe0d4" />
          <circle cx="112" cy="168" r="3" fill="#ff7b6b" />
          <circle cx="122" cy="168" r="3" fill="#ffb299" />
          <circle cx="132" cy="168" r="3" fill="#f6d4c9" />

          <!-- Essay lines -->
          <g stroke="#f2c9ba" stroke-width="2" stroke-linecap="round">
            <line x1="115" y1="188" x2="300" y2="188" />
            <line x1="115" y1="202" x2="280" y2="202" />
            <line x1="115" y1="216" x2="270" y2="216" />
          </g>

          <!-- Highlighted corrected line -->
          <line
            x1="115" y1="230" x2="255" y2="230"
            stroke="#1396a5" stroke-width="3" stroke-linecap="round"
          />

          <!-- Floating ‚Äúscore‚Äù card -->
          <rect x="260" y="70" width="110" height="70" rx="12" fill="#ffffff" stroke="#f6d4c9" />
          <text x="275" y="97" font-family="Inter, system-ui, sans-serif" font-size="11" fill="#ff5b4a">
            Estimated band
          </text>
          <text x="275" y="118" font-family="Inter, system-ui, sans-serif" font-size="18" font-weight="700" fill="#1396a5">
            C1 / C2
          </text>

          <!-- Floating ‚Äúrules‚Äù card -->
          <rect x="60" y="70" width="120" height="70" rx="12" fill="#ffffff" stroke="#f6d4c9" />
          <text x="75" y="96" font-family="Inter, system-ui, sans-serif" font-size="11" fill="#ff5b4a">
            Course Book
          </text>
          <text x="75" y="118" font-family="Inter, system-ui, sans-serif" font-size="14" fill="#444">
            Unit 4 ‚Äì Punctuation
          </text>

          <!-- Teal accent circle behind cards -->
          <circle cx="210" cy="90" r="26" fill="#1396a5" opacity="0.22" />
        </svg>
      </div>
    </div>


      <div class="landing-cta">
        <button class="btn-primary cta-button" data-start-app>
          Start practising your essays now
        </button>
        <p class="landing-note">
          No sign-up required. Paste a task, write your essay, and get feedback in less than a minute.
        </p>
      </div>
    </div>
  </section>

<!-- üîπ App root ‚Äì hidden until user clicks the CTA -->
<div id="app-root" class="app-container" hidden>
  <noscript>This app requires JavaScript to run.</noscript>

  <!-- Top bar -->
  <header class="topbar">
    <div class="topbar-row">
      <h1 class="app-title app-title--logo"
          aria-label="EssayCoach ‚Äì Cambridge Writing Trainer">
        <img
          src="assets/logo-essaycoach-horizontal.svg"
          alt="EssayCoach ‚Äì Cambridge Writing Trainer"
          class="logo-inline" />
      </h1>

      <div class="topbar-right">
        <!-- Language buttons -->
        <button class="btn-ghost" data-lang="en" title="English" data-i18n-title="tooltips.lang_en">EN</button>
        <button class="btn-ghost" data-lang="es" title="Espa√±ol" data-i18n-title="tooltips.lang_es">ES</button>
        <button class="btn-ghost" data-lang="nl" title="Nederlands" data-i18n-title="tooltips.lang_nl">NL</button>

        <!-- Open the Course Book -->
        <button class="btn-ghost" id="btnCourseBook" type="button">
          üìò <span data-i18n="labels.course_book">Read the Course Book</span>
        </button>

        <!-- API/dev badges -->
        <span class="badge" id="apiMode" style="margin-left:8px"></span>
        <span class="badge" id="devBadge" style="display:none">DEV</span>
      </div>
    </div>
  </header>

  <!-- üî∏ everything else in your app (expert-tagline, level row, main, etc.)
       stays exactly as it was, inside this same <div id="app-root"> -->



    <!-- Expertise tagline -->
    <div class="expert-tagline" data-i18n="app.tagline">
      Built on 25 years of Cambridge exam classroom experience.
    </div>

    <!-- Centered level row -->
    <div class="level-row">
      <span data-i18n="labels.level">Level:</span>
      <button type="button" class="pill" data-level="B2">B2</button>
      <button type="button" class="pill pill--active" data-level="C1">C1</button>
      <button type="button" class="pill" data-level="C2">C2</button>
    </div>

        <main class="app-main">

      <!-- LEFT: INPUT / WRITING -->
      <section class="app-column app-column--left">

        <!-- Task prompt -->
        <section class="app-block">
          <header class="app-block__header">
            <h2 class="app-block__title">Task</h2>
            <p class="app-block__hint">
              Paste the exam task here so the coach knows what you are answering.
            </p>
          </header>

          <div class="app-field">
            <label class="app-field__label" for="task">Task prompt</label>
            <textarea
              id="task"
              class="app-textarea app-textarea--task"
              rows="4"
              placeholder="Copy the question from the exam paper here..."
            ></textarea>
          </div>
        </section>

        <!-- Essay -->
        <section class="app-block">
          <header class="app-block__header">
            <h2 class="app-block__title">Your essay</h2>
            <p class="app-block__hint">
              Aim for the full word limit. You can revise as many times as you like.
            </p>
          </header>

          <div class="app-field">
            <label class="app-field__label" for="essay">Write your answer</label>
            <textarea
              id="essay"
              class="app-textarea app-textarea--essay"
              rows="12"
              placeholder="Write your answer here..."
            ></textarea>

            <div class="app-field__meta">
              <span class="app-wordcount">
                Input: <span id="inWC">0</span> words
              </span>
            </div>
          </div>
        </section>

        <!-- Actions -->
        <footer class="app-actions">
          <button id="btnClear" type="button" class="btn-secondary">
            Clear
          </button>

          <button id="btnCorrect" type="button" class="btn-primary">
            Correct my essay
          </button>
        </footer>
      </section>

      <!-- RIGHT: FEEDBACK / OUTPUT -->
      <section class="app-column app-column--right">

        <!-- Summary -->
        <section class="app-block app-block--summary">
          <header class="app-block__header">
            <h2 class="app-block__title">Summary</h2>
          </header>

          <div class="summary-grid">
            <div class="summary-item">
              <p class="summary-label">Estimated band</p>
              <p class="summary-value" id="band-estimate">‚Äì</p>
            </div>
            <div class="summary-item">
              <p class="summary-label">Key focus</p>
              <p class="summary-value" id="key-area">‚Äì</p>
            </div>
            <div class="summary-item">
              <p class="summary-label">Output length</p>
              <p class="summary-value">
                <span id="outWC">0</span> words
              </p>
            </div>
          </div>
        </section>

        <!-- Feedback -->
        <section class="app-block">
          <header class="app-block__header">
            <h2 class="app-block__title">Feedback</h2>
            <p class="app-block__hint">
              This is your teacher-style feedback based on the Cambridge scale.
            </p>
          </header>

          <div id="feedback" class="app-box app-box--feedback">
            <p class="app-placeholder">
              Your feedback will appear here after you click ‚ÄúCorrect my essay‚Äù.
            </p>
          </div>
        </section>

        <!-- Edits -->
        <section class="app-block">
          <header class="app-block__header">
            <h2 class="app-block__title">Edits & suggested corrections</h2>
          </header>

          <div id="edits" class="app-box app-box--edits">
            <p class="app-placeholder">
              Sentence-level suggestions will appear here.
            </p>
          </div>
        </section>

        <!-- Course book help -->
        <section class="app-block">
          <header class="app-block__header">
            <h2 class="app-block__title">Course book help</h2>
            <p class="app-block__hint">
              These links take you to the units that practise your weakest areas.
            </p>
          </header>

          <div id="feedback-card" class="app-box app-box--coursebook">
            <!-- feedback-ui.js renders ‚ÄúImprove this essay‚Äù card here -->
          </div>
        </section>

        <!-- Next draft -->
        <section class="app-block">
          <header class="app-block__header">
            <h2 class="app-block__title">Next draft</h2>
            <p class="app-block__hint">
              Rewrite your answer using the feedback and course book help.
            </p>
          </header>

          <div class="app-field">
            <textarea
              id="nextDraft"
              class="app-textarea app-textarea--draft"
              rows="8"
              placeholder="Rewrite your answer here..."
            ></textarea>
          </div>
        </section>

      </section>

    </main>


    <!-- Open the course book in a new tab -->
    <script>
      document.addEventListener('DOMContentLoaded', () => {
        const btn = document.getElementById('btnCourseBook');
        if (!btn) return;

        btn.addEventListener('click', () => {
          // open the new HTML book in a new tab
          window.open('assets/book/index.html', '_blank', 'noopener');
        });
      });
    </script>

    <!-- API/dev badges -->
    <script>
      (function () {
        const qs  = new URLSearchParams(location.search);
        const dev = qs.get('dev') === '1';
        const api = (window.EC && EC.API_BASE) ? 'live' : (dev ? 'mock' : 'auto');
        const apiEl = document.getElementById('apiMode');
        const devEl = document.getElementById('devBadge');
        if (apiEl) apiEl.textContent = api;
        if (devEl) devEl.style.display = dev ? 'inline' : 'none';
      })();
    </script>

    <!-- Feedback mapping + engine + UI (modules) -->
    <script type="module" src="feedback/mistake-map.js"></script>
    <script type="module" src="feedback/feedback-engine.js"></script>
    <script type="module" src="feedback/feedback-ui.js"></script>

    <!-- DO NOT add another app.js here; it already loads in <head> as js/app.js -->
  </div>

  <!-- üîπ Tiny toggle script for landing ‚Üí app -->
  <script>
    (function () {
      const landing = document.getElementById("landing-hero");
      const appRoot = document.getElementById("app-root");
      const startBtn = document.querySelector("[data-start-app]");

      if (!landing || !appRoot || !startBtn) return;

      startBtn.addEventListener("click", () => {
        landing.style.display = "none";
        appRoot.hidden = false;
        window.scrollTo({ top: 0, behavior: "smooth" });
      });
    })();
  </script>

</body>
</html>

