<!doctype html>
<html lang="es" data-theme="coral">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>EssayCoach – Cambridge Toolkit (PWA)</title>

  <!-- Icons -->
  <link rel="icon" type="image/png" sizes="192x192" href="/essay-coach-instant/icon-192.png" />
  <link rel="apple-touch-icon" href="/essay-coach-instant/icon-192.png" />
  <meta name="theme-color" content="#111111" />

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=IBM+Plex+Serif:wght@400;600&display=swap" rel="stylesheet">

  <!-- Shared CSS -->
  <link rel="stylesheet" href="/essay-coach-instant/assets/styles.css">
</head>
<body>
  <!-- Language switch -->
  <nav class="row" style="gap:6px; padding:10px 14px">
    <a href="/essay-coach-instant/">English</a> |
    <a href="/essay-coach-instant/es/">Español</a>
  </nav>

  <!-- Minimal app scaffold (keep/add your real markup here) -->
  <div class="wrap">
    <h1 data-i18n="app.title">EssayCoach – Instant</h1>
    <p class="sub" data-i18n="home.hero_line">Andamiajes • Corrector (B2–C2) • Notas del entrenador • Resaltados y saltos • Reglas de puntuación • Guía y ejemplo • PDF</p>

    <div class="row">
      <button id="btnCorrect" class="primary"><span data-i18n="btn.correct">Corregir</span></button>
      <button id="btnExportPDF"><span data-i18n="btn.export_pdf">Exportar PDF</span></button>
      <button id="btnClear"><span data-i18n="btn.clear">Limpiar</span></button>
      <button id="btnPaste"><span data-i18n="btn.paste">Pegar</span></button>
      <button id="btnStartTimer"><span data-i18n="btn.start_timer">Iniciar temporizador de 45 min</span></button>
      <span id="timerBadge" class="pill"><span data-i18n="io.timer_dash">Temporizador: --:--</span></span>
    </div>

    <div class="cols" style="margin-top:14px">
      <div class="card">
        <div class="small" data-i18n="io.input_label">Entrada</div>
        <textarea id="userInput" rows="10" data-i18n-placeholder="io.input_label"></textarea>
      </div>
      <div class="card">
        <div class="small" data-i18n="io.output_label">Salida</div>
        <div id="previewHTML" class="preview"></div>
      </div>
    </div>
  </div>

  <!-- Your shared app JS (if any) -->
  <script src="/essay-coach-instant/assets/app.bundle.js" defer></script>

  <!-- Gentle i18n -->
  <script>
  (function () {
    async function loadDict() {
      const res = await fetch('/essay-coach-instant/assets/i18n/es.json', { cache:'no-store' });
      if (!res.ok) throw new Error('i18n es ' + res.status);
      document.documentElement.lang = 'es';
      return res.json();
    }
    function applyOne(el, dict) {
      const key = el.getAttribute('data-i18n');
      if (!key || !dict[key]) return;
      if (el.tagName === 'INPUT' && /^(button|submit|reset)$/i.test(el.type)) { el.value = dict[key]; return; }
      el.textContent = dict[key];
    }
    function applyAll(dict, root=document) {
      root.querySelectorAll('[data-i18n]').forEach(el => applyOne(el, dict));
      root.querySelectorAll('[data-i18n-title]').forEach(el => {
        const k = el.getAttribute('data-i18n-title'); if (dict[k]) el.setAttribute('title', dict[k]);
      });
      root.querySelectorAll('[data-i18n-placeholder]').forEach(el => {
        const k = el.getAttribute('data-i18n-placeholder'); if (dict[k]) el.setAttribute('placeholder', dict[k]);
      });
    }
    function observe(dict) {
      const mo = new MutationObserver(m => m.forEach(x => x.addedNodes.forEach(n => {
        if (n.nodeType === 1) applyAll(dict, n);
      })));
      mo.observe(document.body, { childList:true, subtree:true });
    }
    (document.readyState==='loading' ? document.addEventListener('DOMContentLoaded', run) : run());
    async function run(){
      try { const dict = await loadDict(); applyAll(dict); observe(dict);
        setTimeout(()=>applyAll(dict), 200); setTimeout(()=>applyAll(dict), 600);
      } catch(e){ console.error('[i18n]', e); }
    }
  })();
  </script>
</body>
</html>


 
